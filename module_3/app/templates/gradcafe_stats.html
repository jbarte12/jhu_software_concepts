{% extends 'base.html' %}

{% block header %}
<h2>GradCafe Application Statistics</h2>
{% endblock header %}

{% block content %}

{% if pulling_data %}
  <!-- Auto-refresh while pulling -->
  <meta http-equiv="refresh" content="5">
{% endif %}

<p><strong>Fall 2026 Applicants:</strong> <em>{{ stats.fall_2026_count }}</em></p>
<p><strong>International Applicants (%):</strong> <em>{{ stats.international_pct }}%</em></p>
<p><strong>Average GPA:</strong> <em>{{ stats.avg_gpa }}</em></p>
<p><strong>Average GRE:</strong> <em>{{ stats.avg_gre }}</em></p>
<p><strong>Average GRE Verbal:</strong> <em>{{ stats.avg_gre_v }}</em></p>
<p><strong>Average GRE AW:</strong> <em>{{ stats.avg_gre_aw }}</em></p>
<p><strong>Average GPA (US, Fall 2026):</strong> <em>{{ stats.avg_gpa_us_fall_2026 }}</em></p>
<p><strong>Fall 2025 Acceptance Rate (%):</strong> <em>{{ stats.fall_2025_accept_pct }}%</em></p>

<p>
  <strong>Average GPA of Accepted Fall 2026 Applicants:</strong>
  <em>{{ stats.avg_gpa_fall_2026_accept }}</em>
</p>

<p><strong>JHU CS Master’s Applicants:</strong> <em>{{ stats.jhu_cs_masters }}</em></p>

<p>
  <strong>Fall 2026 PhD CS Acceptances (Raw):</strong>
  <em>{{ stats.fall_2026_cs_accept }}</em>
</p>

<p>
  <strong>Fall 2026 PhD CS Acceptances (LLM):</strong>
  <em>{{ stats.fall_2026_cs_accept_llm }}</em>
</p>

{% if message %}
  <p class="status-message">{{ message }}</p>
{% endif %}

{% if pulling_data %}
  <p class="updating-message">Data is being pulled… please wait.</p>
{% elif pull_complete %}
  <p class="success-message">
    Pull complete. You may now update analysis.
  </p>
{% endif %}

<form action="{{ url_for('pages.refresh_gradcafe') }}" method="post">
  <button
    class="btn-refresh"
    type="submit"
    {% if pulling_data %}disabled{% endif %}
  >
    Pull Data
  </button>
</form>

<form action="{{ url_for('pages.update_analysis') }}" method="post">
  <button
    class="btn-update"
    type="submit"
    {% if pulling_data %}disabled{% endif %}
  >
    Update Analysis
  </button>
</form>

{% endblock content %}
